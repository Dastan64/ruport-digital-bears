!function(){"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),function(){var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&(e=n.currentScript.src),!e)){var c=n.getElementsByTagName("script");c.length&&(e=c[c.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e}();const e=t.p+"assets/images/loader.svg";var n=document.querySelector("#cards-container"),c=document.querySelector(".popup"),a=document.querySelector(".check__input"),r=document.querySelector(".main__select"),o=document.querySelector(".main__heading"),i=function(t,e){n.innerHTML="",t.length>0?e?t.forEach((function(t){var e='\n                <article class="main__card card '.concat(null!=t&&t.in_reserve?"card--highlighted":"",'" id=').concat(t.id,' data-type=\'accepted\'>\n                <div class="card__image-container">\n                    <img width="220" height="146" class="card__image" src=').concat(t.image_url,' alt="">\n                </div>\n                <div class="card__content">\n                    <h3 class="card__title">').concat(t.name,'</h3>\n                    <p class="card__description">').concat(t.type,'</p>\n                    <p class="card__description">').concat(t.gender,"</p>\n                </div>\n            </article>\n                ");n.insertAdjacentHTML("beforeend",e)})):t.forEach((function(t){var e='\n            <article class="main__card card '.concat(null!=t&&t.in_reserve?"card--highlighted":"",'" id=').concat(t.id,'>\n            <div class="card__image-container">\n                <img width="220" height="146" class="card__image" src=').concat(t.image_url,' alt="">\n            </div>\n            <div class="card__content">\n                <h3 class="card__title">').concat(t.name,'</h3>\n                <p class="card__description">').concat(t.type,'</p>\n                <p class="card__description">').concat(t.gender,'</p>\n                <div class="card__buttons">\n                    <button class="card__btn card__btn--accept" type="button">Принять</button>\n                    <button class="card__btn card__btn--reject" type="button">Отклонить</button>\n                </div>\n            </div>\n        </article>\n            ');n.insertAdjacentHTML("beforeend",e)})):n.innerHTML="<h2>Медведей нет, но вы держитесь!</h2>"},s=function(t,e){var n=t.filter((function(t){return t.in_reserve}));console.log(n),e?i(n,"accepted"):i(n)},d={acceptedBears:[],rejectedBears:[],cards:[],set cardsData(t){this.cards=t}},l=function(t,e,n){fetch(t,{method:"POST",body:JSON.stringify({id:e})}).then((function(t){t.ok&&(function(t,e,n){var c=n.find((function(e){return e.id===t}));e.push(c)}(e,n,d.cards),d.cardsData=d.cards.filter((function(t){return t.id!==e})),i(d.cards,!1))})).catch((function(t){return console.error(t)}))};function p(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,c=new Array(e);n<e;n++)c[n]=t[n];return c}var u=d.acceptedBears,h=d.rejectedBears;window.addEventListener("load",(function(){0===n.children.length&&n.insertAdjacentHTML("beforebegin",'\n        <img class="main__loader" style="display: block; margin: 50px auto;" width="200" height="200" src='.concat(e,' alt="">\n        ')),fetch("https://private-9d5e37a-testassignment.apiary-mock.com/get-bears").then((function(t){return t.json()})).then((function(t){var e;console.log(t),d.cardsData=function(t){if(Array.isArray(t))return p(t)}(e=null==t?void 0:t.results.data)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(e)||function(t,e){if(t){if("string"==typeof t)return p(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(t,e):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),console.log(d),d.cards.length>0?i(d.cards,!1):n.innerHTML="<h1>Похоже, мы не получили информации о медведях</h1>",document.querySelector(".main__loader").remove()})).catch((function(t){return console.error(t)}))})),a.addEventListener("change",(function(t){var e=t.target;switch(r.value){case"planned-bears":e.checked?s(d.cards,!1):i(d.cards,!1);break;case"accepted-bears":e.checked?s(u,!0):i(u,!0);break;case"declined-bears":e.checked?s(h,!1):i(h,!1)}})),r.addEventListener("change",(function(t){switch(t.target.value){case"planned-bears":o.textContent="Поступившие заявки",i(d.cards),a.checked&&s(d.cards,!1);break;case"accepted-bears":o.textContent="Принятые медведи",i(u,!0),a.checked&&s(u,!1);break;case"declined-bears":o.textContent="Отклонённые медведи",i(h),a.checked&&s(h,!1)}})),n.addEventListener("click",(function(t){var e,n,a=t.target,r=+(null===(e=a.closest(".card"))||void 0===e?void 0:e.id);"BUTTON"===a.tagName&&a.classList.contains("card__btn--accept")?l("https://private-9d5e37a-testassignment.apiary-mock.com/resolve-bear",r,u):"BUTTON"===a.tagName&&a.classList.contains("card__btn--reject")?l("https://private-9d5e37a-testassignment.apiary-mock.com/reject-bear",r,h):"accepted"===(null===(n=a.closest(".card"))||void 0===n?void 0:n.dataset.type)&&fetch("https://private-dd610-ruporttestassignment.apiary-mock.com/get-bears/".concat(r)).then((function(t){if(t.ok)return t.json();404===t.status&&(alert("Судя по всему, только Леонард, Миша и Клео могут рассказать о себе. Остальные стесняются."),console.warn("Похоже, работают только 3 эндпоинта из 10"))})).then((function(t){var e;t&&(e=null==t?void 0:t.data,c.classList.toggle("popup--hidden"),c.innerHTML='\n    <div class="popup">\n    <div class="popup__content">\n        <div class="popup__image-container">\n            <img width="460" height="400" class="popup__image" src='.concat(e.image_url,' alt="">\n        </div>\n        <div class="popup__info">\n            <h3 class="popup__title">').concat(e.name,'</h3>\n            <p class="popup__description">').concat(e.type,'</p>\n            <p class="popup__description">').concat(e.gender,'</p>\n            <div class="popup__text-container">\n                <p class="popup__text">').concat(e.text,'</p>\n            </div>\n            <div class="popup__buttons">\n                <button class="popup__btn popup__btn--accept" type="button">Принять</button>\n                <button class="popup__btn popup__btn--reject" type="button">Отклонить</button>\n            </div>\n        </div>\n        <button class="popup__close-btn" type="button">\n            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">\n                <path d="M19 1L1 19" stroke="white" stroke-width="2" stroke-linecap="round"\n                    stroke-linejoin="round" />\n                <path d="M1 1L19 19" stroke="white" stroke-width="2" stroke-linecap="round"\n                    stroke-linejoin="round" />\n            </svg>\n        </button>\n    </div>\n</div>\n    '),c.querySelector(".popup__close-btn").addEventListener("click",(function(){c.classList.toggle("popup--hidden")})))})).catch((function(t){return console.log(t)}))}))}();